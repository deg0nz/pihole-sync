sync:
  # How to trigger syncs: interval | watch_config_file | watch_config_api
  trigger_mode: interval
  # Interval in minutes between sync operations (also default poll interval for watch_config_api)
  interval: 60
  # Poll interval in minutes for watch_config_api (falls back to interval when omitted)
  api_poll_interval: 5
  # Pi-hole config path to watch when trigger_mode is watch_config_file
  config_path: /etc/pihole/pihole.toml
  # Cache location for temporary files (inside the container)
  cache_location: /var/cache/pihole-sync

# Main Pi-hole instance (source)
main:
  host: main-pihole.example.com
  schema: https
  port: 443
  api_key: YOUR_MAIN_PIHOLE_APP_PASSWORD

# Secondary Pi-hole instances (targets)
secondary:
  - host: secondary-pihole-1.example.com
    schema: https
    port: 443
    api_key: YOUR_SECONDARY_PIHOLE_APP_PASSWORD
    update_gravity: true
    # Select sync mechanism (mutually exclusive per secondary)
    # - teleporter: sync via Pi-hole teleporter endpoint (/teleporter)
    # - config_api: sync via config endpoint (/config) using `config_api_sync_options` filters
    # If omitted, `config_api_sync_options` implies config_api for backwards compatibility.
    sync_mode: config_api
    config_api_sync_options:
      # If omitted, defaults to include with a warning
      mode: include
      # List of keys/paths to include or exclude
      # All children of a given key will be included/excluded
      filter_keys:
        - "dns.cnameRecords"
        - "dns.hosts"
        - "dns.upstreams"
        - "webserver.session.timeout"

  - host: secondary-pihole-2.example.com
    schema: https
    port: 443
    api_key: YOUR_SECONDARY_PIHOLE_APP_PASSWORD
    update_gravity: true
    sync_mode: teleporter
    # Sync includes as described in https://ftl.pi-hole.net/master/docs/#post-/teleporter
    # Omitted entries are validated as true
    # Attention: The Teleporter import causes the target Pi-hole to be unresponsive for quire some time.
    # Be careful when using this feature with config-based triggers like watch_config_file or watch_config_api
    # Frequent config changes may cause the target Pi-hole to become unresponsive for a longer period of time.
    teleporter_sync_options:
      # This syncs the *COMPLETE* config (teleporter mode only; ignored in config_api mode)
      config: true
      dhcp_leases: false
      gravity:
        group: true
        adlist_by_group: true
        domainlist: false
        domainlist_by_group: false
        client: true
        client_by_group: false
